<div class="singleMatch">
    <main>
        <h2 id="matchHeader">{{awayTeam}} vs. {{homeTeam}}</h2>
        <h3 id="linkLeagueMatchupsHeader"><a id="linkLeagueMatchups" href="/matchups/{{leaguePath}}">Back to
                {{leagueStr}} Matchups</a></h3>
        <br>
        <h4 id="oddsTitle">Odds:</h4>
        <ul>
            <li>
                <p id="printAwayOdds">{{awayTeam}}: {{awayOddsStr}}</p>
            </li>
            <li>
                <p id="printHomeOdds">{{homeTeam}}: {{homeOddsStr}}</p>
            </li>
            <br>
        </ul>
        {{!-- /
        / todo: since we can't get total credits wagered from games db, unless we go through each users' pickHistory for
        games with same UID,
        // we can't determine total percentage of credits wagered on each team and the percentages. I think it could be
        good to have that stat
        // because you can put in a ton of 1-credit picks to skew the community pick %, should show what % of the total
        money wagered on each team too
        --}}
        <article>
            <h4>Community Picks: {{totalPicks}}</h4>
            <ul>
                <li>
                    <p id="awayCommunityPicks">{{awayTeam}}: {{totalAwayPicks}} ({{awayPickPercentage}}%)</p>
                </li>
                <li>
                    <p id="homeCommunityPicks">{{homeTeam}}: {{totalHomePicks}} ({{homePickPercentage}}%)</p>
                </li>
                <br>
            </ul>
        </article>

        {{!-- Pick A Team --}}
        <p id="pickError"></p>
        <form action="/matchups/{{leaguePath}}/{{uid}}/submitPick" method="POST" id="submitPickForm">
            <label class="pickTeamLabel" for="selectTeamPick">Pick A Team</label>
            <select name="selectTeamPick" id="selectTeamPick" required>
                <option value="" disabled selected hidden> * Select a Team *</option>
                <option value="{{awayTeam}},{{awayOdds}},{{uid}}" id="optionAwayTeam">{{awayTeam}}: {{awayOddsStr}}
                </option>
                <option value="{{homeTeam}},{{homeOdds}},{{uid}}" id="optionHomeTeam">{{homeTeam}}: {{homeOddsStr}}
                </option>
            </select>
            <input type="hidden" id="creditBalance" value="{{creditBalance}}">
            <label class="creditsLabel" for="creditsInput">Credits:</label>
            <input type="number" name="creditsInput" id="creditsInput" min="1" max="{{creditBalance}}" required>
            <input type="hidden" id="creditBalance" value="{{creditBalance}}">
            <input type="hidden" id="awayTeam" value="{{awayTeam}}">
            <input type="hidden" id="homeTeam" value="{{homeTeam}}">
            <input type="hidden" id="awayOdds" value="{{awayOdds}}">
            <input type="hidden" id="homeOdds" value="{{homeOdds}}">
            <br>
            <button id="submitPickButton" type="submit">Submit Pick</button>
            <br>
            <button class="confirmForm" id="confirmSubmitPickButton" type="submit">Confirm Your Pick!</button>
        </form>
        <p id="pickMessage"></p>
        <br>

        {{!-- Display Comment Thread --}}
        <article>
            <h4>Comments: {{comments.length}}</h4>
            <ul id="commentList">
                {{#each comments}}
                <li>
                    <p class="comment">
                        {{#if this.teamPicked}}
                        {{#ifEquals this.teamPicked ../homeTeam}}
                            <span style="color: {{../homeTeamColor}}; font-weight: bold;">{{this.author}}</span>
                        {{else}}
                            <span style="color: {{../awayTeamColor}}; font-weight: bold;">{{this.author}}</span>
                        {{/ifEquals}}
                        {{else}}
                            <span>{{this.author}}</span>
                        {{/if}}
                        : {{this.comment}}
                    </p>
                </li>
                {{/each}}
            </ul>
        </article>

        {{!-- Post a Comment --}}
        <p id="commentError"></p>
        <form action="/matchups/{{leaguePath}}/{{uid}}/submitComment" method="POST" id="postCommentForm">
            <label id="commentLabel" for="commentInput">Write a comment:</label>
            <input type="text" id="commentInput" name="commentInput" required>
            <br>
            <button id="submitCommentButton" type="submit">Post Comment</button>
        </form>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bad-words@3.0.4/lib/badwords.min.js"></script>
    <script src="/public/js/submitPick.js"></script>
    <script src="/public/js/submitComment.js"></script>
</div>



<style>
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea, #764ba2);
    margin: 0;
    padding: 2rem;
    display: flex;
    justify-content: center;
}

.singleMatch main {
    background: white;
    padding: 2rem 2.5rem;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    width: 100%;
    max-width: 700px;
    text-align: left;
}

.singleMatch h2 {
    font-size: 2rem;
    margin-bottom: 1rem;
    color: #2d3748;
    font-family: 'Special Gothic Condensed One', sans-serif;
}

.singleMatch h3 a {
    font-size: 1rem;
    text-decoration: none;
    color: #667eea;
    font-weight: 600;
}

.singleMatch h3 a:hover {
    text-decoration: underline;
}

.singleMatch h4 {
    font-size: 1.2rem;
    margin-top: 1.5rem;
    color: #2d3748;
    font-weight: bold;
}

.singleMatch ul {
    list-style-type: none;
    padding-left: 0;
}

.singleMatch li {
    margin-bottom: 0.75rem;
}

#submitPickForm, #postCommentForm {
    margin-top: 1.5rem;
}

label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
}

select, input[type="number"], input[type="text"] {
    width: 100%;
    padding: 0.5rem;
    margin-bottom: 1rem;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 1rem;
}

button {
    background-color: #667eea;
    color: white;
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 6px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    margin-top: 0.5rem;
    transition: background-color 0.3s ease;
}

button:hover {
    background-color: #5a67d8;
}

.comment {
    background: #f5f5f5;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    margin-bottom: 0.5rem;
    font-size: 0.95rem;
}
</style>
